(this.webpackJsonpfuelmap=this.webpackJsonpfuelmap||[]).push([[0],{29:function(e,t,a){},30:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(13),i=a.n(s),r=a(2),l=(a(29),a(30),a(54)),o=a(55),d=a(57),u=a(58),j=a(56),b=a(0);function f(e){var t=e.stationID,a=e.editableField,n=e.fuelData,c=e.avgPrices;return Object.entries(n).map((function(e){var n=Object(r.a)(e,2),s=n[0],i=n[1];return i>0&&null!==i?Object(b.jsxs)("div",{className:"circle circle".concat(s),children:[Object(b.jsx)("svg",{height:"30",width:"30",children:Object(b.jsx)("circle",{cx:"15",cy:"15",r:"15"})}),Object(b.jsx)("h4",{className:"iconText",children:A[s]}),Object(b.jsxs)("div",{contentEditable:a===t?"true":"false",className:"price ".concat(c[s]>i?"priceGreen":"priceRed"),children:["\u20ac ",i]})]}):Object(b.jsx)(b.Fragment,{})}))}var h=a(6),p=a(7),O=a.n(p),m=a(14),x=a(24),v=a.n(x),g=!1;function y(){return D.apply(this,arguments)}function D(){return D=Object(m.a)(O.a.mark((function e(){var t,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:["A95","ASC"],(!(a.length>1&&void 0!==a[1])||a[1])&&(document.getElementById("Loading").style.display="block"),e.next=5,v.a.get("".concat(L,"/fuelstations?sortBy=").concat(t[0],"&sortOrder=").concat(t[1])).then((function(e){200===e.status?E(e.data):C(e.status)})).catch((function(e){C(500)}));case 5:return document.getElementById("Loading").style.display="none",e.abrupt("return");case 7:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function N(e){return S.apply(this,arguments)}function S(){return S=Object(m.a)(O.a.mark((function e(t){var a,n,c,s,i,l,o,d,u,j,b,f,p=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=p.length>1&&void 0!==p[1]?p[1]:"popup",n=t.ID,c=t.fuelData,"popup"===a?(s=document.querySelectorAll("#s".concat(n," .price")),i=document.querySelector("#LoadEditP".concat(n)),l=document.querySelector("#EditIconP".concat(n))):(s=document.querySelectorAll("#t".concat(n," .price")),i=document.querySelector("#LoadEdit".concat(n)),l=document.querySelector("#EditIcon".concat(n))),i.style.display="block",l.style.opacity=0,o={},s.forEach((function(e){var t=parseFloat(e.innerHTML.split("&nbsp;")[1]),a=e.parentElement.classList[1].replace("circle","");o[a]=t})),d=!1,u=0,j=Object.entries(o);case 10:if(!(u<j.length)){e.next=18;break}if(b=Object(r.a)(j[u],2),f=b[0],b[1]===c[f]){e.next=15;break}return d=!0,e.abrupt("break",18);case 15:u++,e.next=10;break;case 18:if(!d){e.next=23;break}return e.next=21,fetch(L+"/editfuelstation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(h.a)({ID:n},o))}).then(function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=5;break}return e.next=3,y(F,!1);case 3:e.next=7;break;case 5:s.forEach((function(e){e.innerHTML="\u20ac "+c[e.parentElement.classList[1].replace("circle","")]})),console.log("Kainos nepakeistos");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 21:e.next=24;break;case 23:console.log("Kainos nepakeistos");case 24:i.style.display="none",l.style.opacity=1;case 26:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function k(e){var t=e.location,a=e.avgPrices;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"StationInfo",children:[Object(b.jsx)("h2",{className:"StationName",children:t.name}),Object(b.jsx)("h4",{className:"address",children:t.address})]}),Object(b.jsx)("div",{className:"prices",id:"s".concat(t.ID),children:Object(b.jsx)(f,{fuelData:t.fuelData,avgPrices:a})}),Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsx)("a",{className:"ChangeLink",id:"EditIconP".concat(t.ID),onClick:function(){return N(t)},children:"Keisti Kain\u0105"}),Object(b.jsx)("div",{className:"lds-dual-ring small blue",id:"LoadEditP".concat(t.ID)})]}),Object(b.jsx)("h4",{className:"updated",children:t.updated})]})}function P(e){var t=e.avgPrices,a=e.minPriceStations,n=e.sortBy,c=e.totalStations;return Object(b.jsxs)(b.Fragment,{children:[" ",Object.entries(t).map((function(t,c){var s=Object(r.a)(t,2),i=s[0],l=s[1];return Object(b.jsxs)("div",{className:"circleDisplay",children:[Object(b.jsx)("div",{className:"sideCircle BG".concat(i," ").concat(n[0]===i?"ASC"===n[1]?"green":"red":""),onClick:function(){return e.setSortBy([i,n[0]===i&&"ASC"===n[1]?"DESC":"ASC"])},children:Object(b.jsx)("h4",{className:"iconTextDisplay",children:A[i]})}),Object(b.jsxs)("div",{className:"fuelPricesDiv",children:[Object(b.jsxs)("h4",{children:["VID: ",l.toFixed(2),"\u20ac"]}),Object(b.jsxs)("h4",{className:"minPrice",onClick:function(){return e.setPos([a[i].latitude,a[i].longitude])},children:["MIN: ",a[i].fuelData[i].toFixed(2),"\u20ac"]})]})]},c)})),Object(b.jsx)("div",{className:"line"}),c," ",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Stations"]})}function I(e){var t=Object(n.useState)(-1),a=Object(r.a)(t,2),c=a[0],s=a[1],i=e.FuelStationData,l=e.averagePrices,o=e.quantity,d=e.sortBy;return Object(b.jsxs)(b.Fragment,{children:[i.map((function(t,a){return Object.values(t.fuelData).some((function(e){return e>0&&null!=e}))&&0!==t.fuelData[d[0]]?Object(b.jsxs)("div",{className:"stationRow ".concat(c===t.ID?"editable":""),style:a>o?{display:"none"}:{display:"block"},children:[Object(b.jsxs)("div",{className:"stationHeaders",onClick:function(){return e.setPos([t.latitude,t.longitude])},children:[Object(b.jsx)("div",{className:"stationName",children:t.name}),Object(b.jsxs)("div",{className:"stationAddress",children:[t.address,Object(b.jsx)("div",{className:"stationUpdated",children:t.updated})]})]}),Object(b.jsx)("div",{className:"stationPrices",id:"t".concat(t.ID),children:Object(b.jsx)(f,{fuelData:t.fuelData,avgPrices:l,stationID:t.ID,editableField:c})}),Object(b.jsxs)("div",{className:"stationEdit",onClick:c===t.ID?function(){s(-1),N(t,"table")}:function(){return s(t.ID)},children:[Object(b.jsx)("div",{className:"lds-dual-ring small",id:"LoadEdit".concat(t.ID)}),Object(b.jsx)("i",{className:"fa-solid fa-pen-to-square",id:"EditIcon".concat(t.ID)})]})]},t.ID):(o+=1,Object(b.jsx)(b.Fragment,{}))})),Object(b.jsx)("button",{onClick:function(){return e.setDisplayedTableStations(o+6)},children:"LOAD MORE"})]})}var E,C,F,A={A95:"95",A98:"98",D:"D",LPG:"LPG"},T=["A95","A98","D","LPG"],L="https://fuelapi.ignuxas.com";var w=function(){var e,t=Object(n.useState)([]),a=Object(r.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(["A95","ASC"]),f=Object(r.a)(i,2),h=f[0],p=f[1],O=Object(n.useState)(6),m=Object(r.a)(O,2),x=m[0],v=m[1],D=Object(n.useState)(200),N=Object(r.a)(D,2),S=N[0],A=N[1];function L(e){for(var t=0,a=0,n=0;n<e.length;n++)null!==e[n]&&e[n]>.4&&e[n]<3&&(t+=1,a+=e[n]);return a/t}Object(n.useEffect)((function(){C=A,E=s,F=h,y(h)}),[]),Object(n.useEffect)((function(){y(h)}),[h]);var w=function(){var t=Object(l.a)();return e=t,Object(b.jsx)(b.Fragment,{})};function B(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getZoom();e.flyTo(t,a)}if(0!==c.length){for(var M={},q=0;q<T.length;q++){for(var G=[],K=0;K<c.length;K++)G.push(c[K].fuelData[T[q]]);M[T[q]]=L(G)}for(var R={},z=function(e){R[T[e]]=function(e,t){for(var a=99,n=0,s=0;s<e.length;s++)null!==e[s]&&e[s]>t-.3&&e[s]<a&&(a=e[s],n=s);return c[n]}(c.map((function(t){return t.fuelData[T[e]]})),M[T[e]])},H=0;H<T.length;H++)z(H)}return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("div",{className:"lds-dual-ring",id:"Loading"}),Object(b.jsxs)("div",{id:"ErrorDiv",style:200!==S?{display:"block"}:{display:"none"},children:[Object(b.jsxs)("h2",{children:["Error ",S]}),"The server is currently down, please try again later or contact me at ",Object(b.jsx)("a",{className:"aeffect",href:"mailto:mikolaitis.ignas@gmail.com",children:"mikolaitis.ignas@gmail.com"})]}),c[0]?Object(b.jsxs)("div",{id:"Menu",children:[Object(b.jsxs)("div",{id:"StationPanel",children:[Object(b.jsx)("p",{id:"Title",children:"KURAS"}),Object(b.jsx)("div",{id:"StationTable",children:Object(b.jsx)(I,{FuelStationData:c,averagePrices:M,quantity:x,setDisplayedTableStations:v,setPos:B,sortBy:h})}),Object(b.jsxs)("footer",{children:[Object(b.jsxs)("p",{children:["Fuel Map made by: ",Object(b.jsx)("a",{className:"aeffect",href:"https://ignuxas.com",target:"_blank",rel:"noreferrer",children:"Ignas Mikolaitis"})]}),Object(b.jsx)("p",{className:"betaText",children:"OPEN BETA: This project is still in development and anything can change, there may be some bugs and unfinished features."}),Object(b.jsx)("p",{className:"redText",children:"Note: The prices are crowd sourced and may be inaccurate or outdated."})]})]}),Object(b.jsxs)("div",{id:"PricePanel",children:[Object(b.jsx)("i",{className:"fas fa-bars",onClick:function(){return function(){var e=document.querySelector("#Menu");!1===g?(e.style.left="0px",g=!0):(e.style.left="-320px",g=!1)}()}}),Object(b.jsx)("div",{className:"avgFuelPrices",children:Object(b.jsx)(P,{avgPrices:M,minPriceStations:R,setPos:B,setSortBy:p,sortBy:h,totalStations:c.length})})]})]}):Object(b.jsx)(b.Fragment,{}),Object(b.jsx)("div",{id:"map",children:Object(b.jsxs)(o.a,{whenCreated:function(t){e=t},center:[55.14952486735533,23.992860624307255],zoom:8,zoomControl:!1,preferCanvas:!0,children:[Object(b.jsx)(w,{}),Object(b.jsx)(d.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",subdomains:"abcd",maxZoom:"20"}),c.map((function(e){return Object.values(e.fuelData).some((function(e){return e>0&&null!=e}))?Object(b.jsx)(u.a,{center:[e.latitude,e.longitude],radius:9,pathOptions:{color:e.fuelData[h[0]]<M[h[0]]&&e.fuelData[h[0]]?"#00AC2B":"#ac0000",fillColor:e.fuelData[h[0]]<M[h[0]]&&e.fuelData[h[0]]?"#57FF71":"#ff5757",fillOpacity:e.fuelData[h[0]]?1:.15,opacity:e.fuelData[h[0]]?1:.15,bubblingMouseEvents:!1,weight:2.5},class:"Marker",children:Object(b.jsx)(j.a,{children:Object(b.jsx)(k,{location:e,avgPrices:M})})}):Object(b.jsx)(b.Fragment,{})})).reverse()]})})]})},B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,59)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),B()}},[[51,1,2]]]);
//# sourceMappingURL=main.44a04b5b.chunk.js.map