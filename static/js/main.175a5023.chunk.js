(this.webpackJsonpfuelmap=this.webpackJsonpfuelmap||[]).push([[0],{29:function(e,t,c){},30:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(13),i=c.n(s),r=c(4),l=(c(29),c(30),c(54)),o=c(55),d=c(57),u=c(58),j=c(56),b=c(0);function h(e){var t=e.fuelTypes,c=e.avgPrices;return t.map((function(t,n){return t>0&&null!==t?Object(b.jsxs)("div",{className:"circle ".concat(I[n]),children:[Object(b.jsx)("svg",{height:"30",width:"30",children:Object(b.jsx)("circle",{cx:"15",cy:"15",r:"15"})}),Object(b.jsx)("h4",{className:"iconText",children:L[n]}),Object(b.jsxs)("div",{contenteditable:e.editableField===e.stationID?"true":"false",className:"price ".concat(c[n]>t?"priceGreen":"priceRed"),children:[Object(b.jsx)("span",{contentEditable:"false",children:"\u20ac"}),"\xa0",t]})]}):Object(b.jsx)(b.Fragment,{})}))}var p=c(6),m=c.n(p),f=c(14),x=c(24),O=c.n(x);function v(e){return g.apply(this,arguments)}function g(){return(g=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(E,"/fuelstations")).then((function(e){200===e.status?k(e.data):S(e.status)})).catch((function(e){S(500)}));case 2:return document.getElementById("Loading").style.display="none",e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return P.apply(this,arguments)}function P(){return P=Object(f.a)(m.a.mark((function e(t){var c,n,a,s,i,l,o,d,u,j,b,h,p=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=p.length>1&&void 0!==p[1]?p[1]:"popup",n=t.ID,a={A95:t.A95,A98:t.A98,D:t.D,LPG:t.LPG},"popup"===c?(s=document.querySelectorAll("#s".concat(n," .price")),i=document.querySelector("#LoadEditP".concat(n)),l=document.querySelector("#EditIconP".concat(n))):(s=document.querySelectorAll("#t".concat(n," .price")),i=document.querySelector("#LoadEdit".concat(n)),l=document.querySelector("#EditIcon".concat(n))),console.log(i),console.log(l),i.style.display="block",l.style.opacity=0,o={A95:0,A98:0,D:0,LPG:0},s.forEach((function(e){var t=parseFloat(e.innerHTML.split("&nbsp;")[1]),c=e.parentElement.classList[1].replace("circle","");o[c]=t})),d=!1,u=0,j=Object.entries(o);u<j.length;u++)b=Object(r.a)(j[u],2),h=b[0],b[1]!==a[h]&&(d=!0);if(!d){e.next=17;break}return e.next=15,fetch(E+"/editfuelstation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ID:n,A95:o.A95,A98:o.A98,D:o.D,LPG:o.LPG})}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=5;break}return e.next=3,v();case 3:e.next=6;break;case 5:console.log("Kainos nepakeistos");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:e.next=18;break;case 17:console.log("Kainos nepakeistos");case 18:i.style.display="none",l.style.opacity=1,console.log("Edit handled");case 21:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function D(e){var t=e.location,c=e.averagePrices;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"StationInfo",children:[Object(b.jsx)("h2",{className:"StationName",children:t.name}),Object(b.jsx)("h4",{className:"address",children:t.address})]}),Object(b.jsx)("div",{className:"prices",id:"s".concat(t.ID),children:Object(b.jsx)(h,{fuelTypes:[t.A95,t.A98,t.D,t.LPG],avgPrices:c})}),Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsx)("a",{className:"ChangeLink",id:"EditIconP".concat(t.ID),onClick:function(){return y(t)},children:"Keisti Kain\u0105"}),Object(b.jsx)("div",{className:"lds-dual-ring small blue",id:"LoadEditP".concat(t.ID)})]}),Object(b.jsx)("h4",{className:"updated",children:t.updated})]})}function N(e){var t=e.averagePrices,c=e.minPriceStations,n=e.minPrices;return t.map((function(t,a){return Object(b.jsxs)("div",{className:"circleDisplay ".concat(I[a]),children:[Object(b.jsx)("svg",{height:"60",width:"60",children:Object(b.jsx)("circle",{cx:"30",cy:"30",r:"30"})}),Object(b.jsx)("h4",{className:"iconTextDisplay",children:L[a]}),Object(b.jsxs)("div",{className:"fuelPricesDiv",children:[Object(b.jsxs)("h4",{children:["VID: ",t.toFixed(2),"\u20ac"]}),Object(b.jsxs)("h4",{className:"minPrice",onClick:function(){return e.setPos([c[a].latitude,c[a].longitude])},children:["MIN: ",n[a].toFixed(2),"\u20ac"]})]})]})}))}function A(e){var t=Object(n.useState)(-1),c=Object(r.a)(t,2),a=c[0],s=c[1],i=e.FuelStationData,l=e.averagePrices,o=e.quantity;return Object(b.jsxs)(b.Fragment,{children:[i.map((function(t,c){return t.A95||t.A98||t.D||t.LPG?Object(b.jsxs)("div",{className:"stationRow ".concat(a===t.ID?"editable":""),style:c>o?{display:"none"}:{display:"block"},children:[Object(b.jsxs)("div",{className:"stationHeaders",onClick:function(){return e.setPos([t.latitude,t.longitude])},children:[Object(b.jsx)("div",{className:"stationName",children:t.name}),Object(b.jsx)("div",{className:"stationAddress",children:t.address})]}),Object(b.jsx)("div",{className:"stationPrices",id:"t".concat(t.ID),children:Object(b.jsx)(h,{fuelTypes:[t.A95,t.A98,t.D,t.LPG],avgPrices:l,stationID:t.ID,editableField:a})}),Object(b.jsx)("div",{className:"stationUpdated",children:t.updated}),Object(b.jsxs)("div",{className:"stationEdit",onClick:a===t.ID?function(){s(-1),y(t,"table")}:function(){return s(t.ID)},children:[Object(b.jsx)("div",{className:"lds-dual-ring small",id:"LoadEdit".concat(t.ID)}),Object(b.jsx)("i",{className:"fa-solid fa-pen-to-square",id:"EditIcon".concat(t.ID)})]})]},t.ID):Object(b.jsx)(b.Fragment,{})})),Object(b.jsx)("a",{className:"aeffect",onClick:function(){return e.setDisplayedTableStations(o+12)},children:"LOAD MORE"})]})}var k,S,I=["circleA95","circleA98","circleD","circleLPG"],L=["95","98","D","LPG"],E="https://fuelapi.ignuxas.com";var F=function(){var e,t=!1,c=Object(n.useState)([]),a=Object(r.a)(c,2),s=a[0],i=a[1],h=Object(n.useState)(12),p=Object(r.a)(h,2),m=p[0],f=p[1],x=Object(n.useState)(200),O=Object(r.a)(x,2),g=O[0],y=O[1];function P(e,t){for(var c=99,n=0,a=0;a<e.length;a++)null!==e[a]&&e[a]>t-.3&&e[a]<c&&(c=e[a],n=a);return s[n]}function I(e){for(var t=0,c=0,n=0;n<e.length;n++)null!==e[n]&&e[n]>.4&&e[n]<3&&(t+=1,c+=e[n]);return c/t}Object(n.useEffect)((function(){S=y,k=i,v()}),[]);var L=function(t){var c=Object(l.a)();return e=c,Object(b.jsx)(b.Fragment,{})};function E(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getZoom();e.flyTo(t,c)}if(0!==s.length){for(var F=[],T=[],w=[],C=[],G=0;G<s.length;G++)F.push(s[G].A95),T.push(s[G].A98),w.push(s[G].D),C.push(s[G].LPG);var M=I(F),q=I(T),B=I(w),K=I(C),R=[M,q,B,K],z=P(F,M),J=P(T,q),H=P(w,B),U=P(C,K),Z=[z,J,H,U]}return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("div",{className:"lds-dual-ring",id:"Loading"}),Object(b.jsxs)("div",{id:"ErrorDiv",style:200!==g?{display:"block"}:{display:"none"},children:[Object(b.jsxs)("h2",{children:["Error ",g]}),"The server is currently down, please try again later or contact me at ",Object(b.jsx)("a",{className:"aeffect",href:"mailto:mikolaitis.ignas@gmail.com",children:"mikolaitis.ignas@gmail.com"})]}),s[0]?Object(b.jsxs)("div",{id:"Menu",children:[Object(b.jsxs)("div",{id:"StationPanel",children:[Object(b.jsx)("p",{id:"Title",children:"KURAS"}),Object(b.jsx)("div",{id:"StationTable",children:Object(b.jsx)(A,{FuelStationData:s,averagePrices:R,quantity:m,setDisplayedTableStations:f,setPos:E})}),Object(b.jsxs)("footer",{children:[Object(b.jsxs)("p",{children:["Fuel Map made by: ",Object(b.jsx)("a",{className:"aeffect",href:"https://ignuxas.com",target:"_blank",rel:"noreferrer",children:"Ignas Mikolaitis"})]}),Object(b.jsx)("p",{className:"betaText",children:"OPEN BETA: This project is still in development and anything can change, there may be some bugs and unfinished features."}),Object(b.jsx)("p",{className:"redText",children:"Note: The prices are crowd sourced and may be inaccurate or outdated."})]})]}),Object(b.jsxs)("div",{id:"PricePanel",children:[Object(b.jsx)("i",{className:"fas fa-bars",onClick:function(){return function(){var e=document.querySelector("#Menu");!1===t?(e.style.left="0px",t=!0):(e.style.left="-320px",t=!1)}()}}),Object(b.jsx)("div",{className:"avgFuelPrices",children:Object(b.jsx)(N,{averagePrices:R,setPos:E,minPriceStations:Z,minPrices:[z.A95,J.A98,H.D,U.LPG]})})]})]}):Object(b.jsx)(b.Fragment,{}),Object(b.jsx)("div",{id:"map",children:Object(b.jsxs)(o.a,{whenCreated:function(t){e=t},center:[55.14952486735533,23.992860624307255],zoom:8,zoomControl:!1,preferCanvas:!0,children:[Object(b.jsx)(L,{}),Object(b.jsx)(d.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",subdomains:"abcd",maxZoom:"20"}),s.map((function(e){return e.A95||e.A98||e.D||e.LPG?Object(b.jsx)(u.a,{center:[e.latitude,e.longitude],radius:9,pathOptions:{color:"#00AC2B",fillOpacity:1,fillColor:"#57FF71",bubblingMouseEvents:!1,weight:2.5},class:"Marker",children:Object(b.jsx)(j.a,{children:Object(b.jsx)(D,{location:e,averagePrices:R})})}):Object(b.jsx)(b.Fragment,{})}))]})})]})},T=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,59)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(F,{})}),document.getElementById("root")),T()}},[[51,1,2]]]);
//# sourceMappingURL=main.175a5023.chunk.js.map