(this.webpackJsonpfuelmap=this.webpackJsonpfuelmap||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(13),i=n.n(s),r=n(2),o=(n(29),n(30),n(54)),l=n(55),d=n(57),u=n(58),j=n(56),b=n(0);function f(e){var t=e.stationID,n=e.editableField,a=e.fuelData,c=e.avgPrices;return Object.entries(a).map((function(e){var a=Object(r.a)(e,2),s=a[0],i=a[1];return i>0&&null!==i?Object(b.jsxs)("div",{className:"circle circle".concat(s),children:[Object(b.jsx)("svg",{height:"30",width:"30",children:Object(b.jsx)("circle",{cx:"15",cy:"15",r:"15"})}),Object(b.jsx)("h4",{className:"iconText",children:F[s]}),Object(b.jsxs)("div",{contentEditable:n===t?"true":"false",className:"price ".concat(c[s]>i?"priceGreen":"priceRed"),children:[Object(b.jsx)("span",{contentEditable:"false",children:"\u20ac"}),"\xa0",i]})]}):Object(b.jsx)(b.Fragment,{})}))}var h=n(6),p=n(7),O=n.n(p),m=n(14),x=n(24),v=n.n(x);function g(){return y.apply(this,arguments)}function y(){return y=Object(m.a)(O.a.mark((function e(){var t,n=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:["A95","ASC"],(!(n.length>1&&void 0!==n[1])||n[1])&&(document.getElementById("Loading").style.display="block"),e.next=5,v.a.get("".concat(T,"/fuelstations?sortBy=").concat(t[0],"&sortOrder=").concat(t[1])).then((function(e){200===e.status?I(e.data):E(e.status)})).catch((function(e){E(500)}));case 5:return document.getElementById("Loading").style.display="none",e.abrupt("return");case 7:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function D(e){return N.apply(this,arguments)}function N(){return N=Object(m.a)(O.a.mark((function e(t){var n,a,c,s,i,o,l,d,u,j,b,f,p=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=p.length>1&&void 0!==p[1]?p[1]:"popup",a=t.ID,c=t.fuelData,"popup"===n?(s=document.querySelectorAll("#s".concat(a," .price")),i=document.querySelector("#LoadEditP".concat(a)),o=document.querySelector("#EditIconP".concat(a))):(s=document.querySelectorAll("#t".concat(a," .price")),i=document.querySelector("#LoadEdit".concat(a)),o=document.querySelector("#EditIcon".concat(a))),console.log(i),console.log(o),i.style.display="block",o.style.opacity=0,l={},s.forEach((function(e){var t=parseFloat(e.innerHTML.split("&nbsp;")[1]),n=e.parentElement.classList[1].replace("circle","");l[n]=t})),d=!1,u=0,j=Object.entries(l);u<j.length;u++)b=Object(r.a)(j[u],2),f=b[0],b[1]!==c[f]&&(d=!0);if(console.log(l),console.log(c),console.log(d),!d){e.next=20;break}return e.next=18,fetch(T+"/editfuelstation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(h.a)({ID:a},l))}).then(function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=5;break}return e.next=3,g(C,!1);case 3:e.next=6;break;case 5:console.log("Kainos nepakeistos");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 18:e.next=21;break;case 20:console.log("Kainos nepakeistos");case 21:i.style.display="none",o.style.opacity=1,console.log("Edit handled");case 24:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function S(e){var t=e.location,n=e.avgPrices;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"StationInfo",children:[Object(b.jsx)("h2",{className:"StationName",children:t.name}),Object(b.jsx)("h4",{className:"address",children:t.address})]}),Object(b.jsx)("div",{className:"prices",id:"s".concat(t.ID),children:Object(b.jsx)(f,{fuelData:t.fuelData,avgPrices:n})}),Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsx)("a",{className:"ChangeLink",id:"EditIconP".concat(t.ID),onClick:function(){return D(t)},children:"Keisti Kain\u0105"}),Object(b.jsx)("div",{className:"lds-dual-ring small blue",id:"LoadEditP".concat(t.ID)})]}),Object(b.jsx)("h4",{className:"updated",children:t.updated})]})}function P(e){var t=e.avgPrices,n=e.minPriceStations,a=e.sortBy;return Object.entries(t).map((function(t,c){var s=Object(r.a)(t,2),i=s[0],o=s[1];return Object(b.jsxs)("div",{className:"circleDisplay",children:[Object(b.jsx)("div",{className:"sideCircle BG".concat(i," ").concat(a[0]===i?"ASC"===a[1]?"green":"red":""),onClick:function(){return e.setSortBy([i,a[0]===i&&"ASC"===a[1]?"DESC":"ASC"])},children:Object(b.jsx)("h4",{className:"iconTextDisplay",children:F[i]})}),Object(b.jsxs)("div",{className:"fuelPricesDiv",children:[Object(b.jsxs)("h4",{children:["VID: ",o.toFixed(2),"\u20ac"]}),Object(b.jsxs)("h4",{className:"minPrice",onClick:function(){return e.setPos([n[i].latitude,n[i].longitude])},children:["MIN: ",n[i].fuelData[i].toFixed(2),"\u20ac"]})]})]},c)}))}function k(e){var t=Object(a.useState)(-1),n=Object(r.a)(t,2),c=n[0],s=n[1],i=e.FuelStationData,o=e.averagePrices,l=e.quantity;return Object(b.jsxs)(b.Fragment,{children:[i.map((function(t,n){return Object.values(t.fuelData).some((function(e){return e>0&&null!=e}))?Object(b.jsxs)("div",{className:"stationRow ".concat(c===t.ID?"editable":""),style:n>l?{display:"none"}:{display:"block"},children:[Object(b.jsxs)("div",{className:"stationHeaders",onClick:function(){return e.setPos([t.latitude,t.longitude])},children:[Object(b.jsx)("div",{className:"stationName",children:t.name}),Object(b.jsxs)("div",{className:"stationAddress",children:[t.address,Object(b.jsx)("div",{className:"stationUpdated",children:t.updated})]})]}),Object(b.jsx)("div",{className:"stationPrices",id:"t".concat(t.ID),children:Object(b.jsx)(f,{fuelData:t.fuelData,avgPrices:o,stationID:t.ID,editableField:c})}),Object(b.jsxs)("div",{className:"stationEdit",onClick:c===t.ID?function(){s(-1),D(t,"table")}:function(){return s(t.ID)},children:[Object(b.jsx)("div",{className:"lds-dual-ring small",id:"LoadEdit".concat(t.ID)}),Object(b.jsx)("i",{className:"fa-solid fa-pen-to-square",id:"EditIcon".concat(t.ID)})]})]},t.ID):Object(b.jsx)(b.Fragment,{})})),Object(b.jsx)("button",{onClick:function(){return e.setDisplayedTableStations(l+12)},children:"LOAD MORE"})]})}var I,E,C,F={A95:"95",A98:"98",D:"D",LPG:"LPG"},A=["A95","A98","D","LPG"],T="https://fuelapi.ignuxas.com";var w=function(){var e,t=!1,n=Object(a.useState)([]),c=Object(r.a)(n,2),s=c[0],i=c[1],f=Object(a.useState)(["A95","ASC"]),h=Object(r.a)(f,2),p=h[0],O=h[1],m=Object(a.useState)(12),x=Object(r.a)(m,2),v=x[0],y=x[1],D=Object(a.useState)(200),N=Object(r.a)(D,2),C=N[0],F=N[1];function T(e){for(var t=0,n=0,a=0;a<e.length;a++)null!==e[a]&&e[a]>.4&&e[a]<3&&(t+=1,n+=e[a]);return n/t}Object(a.useEffect)((function(){E=F,I=i,g(p)}),[]),Object(a.useEffect)((function(){g(p)}),[p]);var w=function(){var t=Object(o.a)();return e=t,Object(b.jsx)(b.Fragment,{})};function L(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getZoom();e.flyTo(t,n)}if(0!==s.length){for(var B={},M=0;M<A.length;M++){for(var q=[],G=0;G<s.length;G++)q.push(s[G].fuelData[A[M]]);B[A[M]]=T(q)}for(var K={},R=function(e){K[A[e]]=function(e,t){for(var n=99,a=0,c=0;c<e.length;c++)null!==e[c]&&e[c]>t-.3&&e[c]<n&&(n=e[c],a=c);return s[a]}(s.map((function(t){return t.fuelData[A[e]]})),B[A[e]])},z=0;z<A.length;z++)R(z)}return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("div",{className:"lds-dual-ring",id:"Loading"}),Object(b.jsxs)("div",{id:"ErrorDiv",style:200!==C?{display:"block"}:{display:"none"},children:[Object(b.jsxs)("h2",{children:["Error ",C]}),"The server is currently down, please try again later or contact me at ",Object(b.jsx)("a",{className:"aeffect",href:"mailto:mikolaitis.ignas@gmail.com",children:"mikolaitis.ignas@gmail.com"})]}),s[0]?Object(b.jsxs)("div",{id:"Menu",children:[Object(b.jsxs)("div",{id:"StationPanel",children:[Object(b.jsx)("p",{id:"Title",children:"KURAS"}),Object(b.jsx)("div",{id:"StationTable",children:Object(b.jsx)(k,{FuelStationData:s,averagePrices:B,quantity:v,setDisplayedTableStations:y,setPos:L})}),Object(b.jsxs)("footer",{children:[Object(b.jsxs)("p",{children:["Fuel Map made by: ",Object(b.jsx)("a",{className:"aeffect",href:"https://ignuxas.com",target:"_blank",rel:"noreferrer",children:"Ignas Mikolaitis"})]}),Object(b.jsx)("p",{className:"betaText",children:"OPEN BETA: This project is still in development and anything can change, there may be some bugs and unfinished features."}),Object(b.jsx)("p",{className:"redText",children:"Note: The prices are crowd sourced and may be inaccurate or outdated."})]})]}),Object(b.jsxs)("div",{id:"PricePanel",children:[Object(b.jsx)("i",{className:"fas fa-bars",onClick:function(){return function(){var e=document.querySelector("#Menu");!1===t?(e.style.left="0px",t=!0):(e.style.left="-320px",t=!1)}()}}),Object(b.jsx)("div",{className:"avgFuelPrices",children:Object(b.jsx)(P,{avgPrices:B,minPriceStations:K,setPos:L,setSortBy:O,sortBy:p})})]})]}):Object(b.jsx)(b.Fragment,{}),Object(b.jsx)("div",{id:"map",children:Object(b.jsxs)(l.a,{whenCreated:function(t){e=t},center:[55.14952486735533,23.992860624307255],zoom:8,zoomControl:!1,preferCanvas:!0,children:[Object(b.jsx)(w,{}),Object(b.jsx)(d.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",subdomains:"abcd",maxZoom:"20"}),s.map((function(e){return Object.values(e.fuelData).some((function(e){return e>0&&null!=e}))?Object(b.jsx)(u.a,{center:[e.latitude,e.longitude],radius:9,pathOptions:{color:e.fuelData[p[0]]<B[p[0]]?"#00AC2B":"#ac0000",fillOpacity:1,fillColor:e.fuelData[p[0]]<B[p[0]]?"#57FF71":"#ff5757",bubblingMouseEvents:!1,weight:2.5},class:"Marker",children:Object(b.jsx)(j.a,{children:Object(b.jsx)(S,{location:e,avgPrices:B})})}):Object(b.jsx)(b.Fragment,{})})).reverse()]})})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root")),L()}},[[51,1,2]]]);
//# sourceMappingURL=main.8d7d65f6.chunk.js.map